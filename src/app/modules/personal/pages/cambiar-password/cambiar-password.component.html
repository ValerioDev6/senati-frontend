<div>
	<h2 class="text-xl font-semibold text-gray-900 mb-8 uppercase">Cambiar Contraseña</h2>

	<form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="space-y-6">
		<!-- Old Password -->
		<div class="space-y-2">
			<label class="block text-sm font-medium text-gray-700">Antigua Contraseña</label>
			<div class="relative">
				<nz-input-group [nzSuffix]="oldPasswordSuffix">
					<input
						nz-input
						[type]="showOldPassword ? 'text' : 'password'"
						formControlName="oldPassword"
						class="w-full pl-4 pr-10 py-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
						placeholder="Enter old password"
					/>
				</nz-input-group>
				<ng-template #oldPasswordSuffix>
					<span
						nz-icon
						[nzType]="showOldPassword ? 'eye-invisible' : 'eye'"
						nzTheme="outline"
						(click)="toggleOldPasswordVisibility()"
					></span>
				</ng-template>
			</div>
			<div
				*ngIf="passwordForm.get('oldPassword')?.invalid && passwordForm.get('oldPassword')?.touched"
				class="text-red-500 text-sm mt-1"
			>
				Old password is required
			</div>
		</div>

		<!-- New Password -->
		<div class="space-y-2">
			<label class="block text-sm font-medium text-gray-700">Nueva Contraseña</label>
			<div class="relative">
				<nz-input-group [nzSuffix]="newPasswordSuffix">
					<input
						nz-input
						[type]="showNewPassword ? 'text' : 'password'"
						formControlName="newPassword"
						class="w-full pl-4 pr-10 py-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
						placeholder="Enter new password"
					/>
				</nz-input-group>
				<ng-template #newPasswordSuffix>
					<span
						nz-icon
						[nzType]="showNewPassword ? 'eye-invisible' : 'eye'"
						nzTheme="outline"
						(click)="toggleNewPasswordVisibility()"
					></span>
				</ng-template>
			</div>
			<div
				*ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
				class="text-red-500 text-sm mt-1"
			>
				<div *ngIf="passwordForm.get('newPassword')?.errors?.['required']">New password is required</div>
				<div *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">
					Password must be at least 8 characters long
				</div>
				<div *ngIf="passwordForm.get('newPassword')?.errors?.['pattern']">
					Password must contain at least one letter and one number
				</div>
			</div>
		</div>

		<!-- Confirm Password -->
		<div class="space-y-2">
			<label class="block text-sm font-medium text-gray-700">Confirmar Contraseña</label>
			<div class="relative">
				<nz-input-group [nzSuffix]="confirmPasswordSuffix">
					<input
						nz-input
						[type]="showConfirmPassword ? 'text' : 'password'"
						formControlName="confirmPassword"
						class="w-full pl-4 pr-10 py-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
						placeholder="Confirm new password"
					/>
				</nz-input-group>
				<ng-template #confirmPasswordSuffix>
					<span
						nz-icon
						[nzType]="showConfirmPassword ? 'eye-invisible' : 'eye'"
						nzTheme="outline"
						(click)="toggleConfirmPasswordVisibility()"
					></span>
				</ng-template>
			</div>
			<div
				*ngIf="passwordForm.hasError('mismatch') && passwordForm.get('confirmPassword')?.touched"
				class="text-red-500 text-sm mt-1"
			>
				Passwords do not match
			</div>
		</div>

		<!-- Submit Button -->
		<div class="pt-4">
			<button nz-button nzType="primary" type="submit" [disabled]="passwordForm.invalid" class="w-full">
				Guardar Contraseña
			</button>
		</div>
	</form>
</div>
